 /*
 * # Semantic UI - 2.3.1
 * https://github.com/Semantic-Org/Semantic-UI
 * http://www.semantic-ui.com/
 *
 * Copyright 2014 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(p,b,v,h){p.site=p.fn.site=function(e){var s,c,i=(new Date).getTime(),o=[],n=e,t="string"==typeof n,l=[].slice.call(arguments,1),u=p.isPlainObject(e)?p.extend(!0,{},p.site.settings,e):p.extend({},p.site.settings),r=u.namespace,d=u.error,a="module-"+r,f=p(v),m=this,g=f.data(a);return s={initialize:function(){s.instantiate()},instantiate:function(){s.verbose("Storing instance of site",s),g=s,f.data(a,s)},normalize:function(){s.fix.console(),s.fix.requestAnimationFrame()},fix:{console:function(){s.debug("Normalizing window.console"),console!==h&&console.log!==h||(s.verbose("Console not available, normalizing events"),s.disable.console()),void 0!==console.group&&void 0!==console.groupEnd&&void 0!==console.groupCollapsed||(s.verbose("Console group not available, normalizing events"),b.console.group=function(){},b.console.groupEnd=function(){},b.console.groupCollapsed=function(){}),void 0===console.markTimeline&&(s.verbose("Mark timeline not available, normalizing events"),b.console.markTimeline=function(){})},consoleClear:function(){s.debug("Disabling programmatic console clearing"),b.console.clear=function(){}},requestAnimationFrame:function(){s.debug("Normalizing requestAnimationFrame"),b.requestAnimationFrame===h&&(s.debug("RequestAnimationFrame not available, normalizing event"),b.requestAnimationFrame=b.requestAnimationFrame||b.mozRequestAnimationFrame||b.webkitRequestAnimationFrame||b.msRequestAnimationFrame||function(e){setTimeout(e,0)})}},moduleExists:function(e){return p.fn[e]!==h&&p.fn[e].settings!==h},enabled:{modules:function(e){var t=[];return e=e||u.modules,p.each(e,function(e,n){s.moduleExists(n)&&t.push(n)}),t}},disabled:{modules:function(e){var t=[];return e=e||u.modules,p.each(e,function(e,n){s.moduleExists(n)||t.push(n)}),t}},change:{setting:function(o,r,e,a){e="string"==typeof e?"all"===e?u.modules:[e]:e||u.modules,a=a===h||a,p.each(e,function(e,n){var t,i=!s.moduleExists(n)||(p.fn[n].settings.namespace||!1);s.moduleExists(n)&&(s.verbose("Changing default setting",o,r,n),p.fn[n].settings[o]=r,a&&i&&0<(t=p(":data(module-"+i+")")).length&&(s.verbose("Modifying existing settings",t),t[n]("setting",o,r)))})},settings:function(i,e,o){e="string"==typeof e?[e]:e||u.modules,o=o===h||o,p.each(e,function(e,n){var t;s.moduleExists(n)&&(s.verbose("Changing default setting",i,n),p.extend(!0,p.fn[n].settings,i),o&&r&&0<(t=p(":data(module-"+r+")")).length&&(s.verbose("Modifying existing settings",t),t[n]("setting",i)))})}},enable:{console:function(){s.console(!0)},debug:function(e,n){e=e||u.modules,s.debug("Enabling debug for modules",e),s.change.setting("debug",!0,e,n)},verbose:function(e,n){e=e||u.modules,s.debug("Enabling verbose debug for modules",e),s.change.setting("verbose",!0,e,n)}},disable:{console:function(){s.console(!1)},debug:function(e,n){e=e||u.modules,s.debug("Disabling debug for modules",e),s.change.setting("debug",!1,e,n)},verbose:function(e,n){e=e||u.modules,s.debug("Disabling verbose debug for modules",e),s.change.setting("verbose",!1,e,n)}},console:function(e){if(e){if(g.cache.console===h)return void s.error(d.console);s.debug("Restoring console function"),b.console=g.cache.console}else s.debug("Disabling console function"),g.cache.console=b.console,b.console={clear:function(){},error:function(){},group:function(){},groupCollapsed:function(){},groupEnd:function(){},info:function(){},log:function(){},markTimeline:function(){},warn:function(){}}},destroy:function(){s.verbose("Destroying previous site for",f),f.removeData(a)},cache:{},setting:function(e,n){if(p.isPlainObject(e))p.extend(!0,u,e);else{if(n===h)return u[e];u[e]=n}},internal:function(e,n){if(p.isPlainObject(e))p.extend(!0,s,e);else{if(n===h)return s[e];s[e]=n}},debug:function(){u.debug&&(u.performance?s.performance.log(arguments):(s.debug=Function.prototype.bind.call(console.info,console,u.name+":"),s.debug.apply(console,arguments)))},verbose:function(){u.verbose&&u.debug&&(u.performance?s.performance.log(arguments):(s.verbose=Function.prototype.bind.call(console.info,console,u.name+":"),s.verbose.apply(console,arguments)))},error:function(){s.error=Function.prototype.bind.call(console.error,console,u.name+":"),s.error.apply(console,arguments)},performance:{log:function(e){var n,t;u.performance&&(t=(n=(new Date).getTime())-(i||n),i=n,o.push({Element:m,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":t})),clearTimeout(s.performance.timer),s.performance.timer=setTimeout(s.performance.display,500)},display:function(){var e=u.name+":",t=0;i=!1,clearTimeout(s.performance.timer),p.each(o,function(e,n){t+=n["Execution Time"]}),e+=" "+t+"ms",(console.group!==h||console.table!==h)&&0<o.length&&(console.groupCollapsed(e),console.table?console.table(o):p.each(o,function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")}),console.groupEnd()),o=[]}},invoke:function(i,e,n){var o,r,t,a=g;return e=e||l,n=m||n,"string"==typeof i&&a!==h&&(i=i.split(/[\. ]/),o=i.length-1,p.each(i,function(e,n){var t=e!=o?n+i[e+1].charAt(0).toUpperCase()+i[e+1].slice(1):i;if(p.isPlainObject(a[t])&&e!=o)a=a[t];else{if(a[t]!==h)return r=a[t],!1;if(!p.isPlainObject(a[n])||e==o)return a[n]!==h?r=a[n]:s.error(d.method,i),!1;a=a[n]}})),p.isFunction(r)?t=r.apply(n,e):r!==h&&(t=r),p.isArray(c)?c.push(t):c!==h?c=[c,t]:t!==h&&(c=t),r}},t?(g===h&&s.initialize(),s.invoke(n)):(g!==h&&s.destroy(),s.initialize()),c!==h?c:this},p.site.settings={name:"Site",namespace:"site",error:{console:"Console cannot be restored, most likely it was overwritten outside of module",method:"The method you called is not defined."},debug:!1,verbose:!1,performance:!0,modules:["accordion","api","checkbox","dimmer","dropdown","embed","form","modal","nag","popup","rating","shape","sidebar","state","sticky","tab","transition","visit","visibility"],siteNamespace:"site",namespaceStub:{cache:{},config:{},sections:{},section:{},utilities:{}}},p.extend(p.expr[":"],{data:p.expr.createPseudo?p.expr.createPseudo(function(n){return function(e){return!!p.data(e,n)}}):function(e,n,t){return!!p.data(e,t[3])}})}(jQuery,window,document),function(C,e,k,w){"use strict";e=void 0!==e&&e.Math==Math?e:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),C.fn.transition=function(){var l,a=C(this),g=a.selector||"",p=(new Date).getTime(),b=[],v=arguments,h=v[0],y=[].slice.call(arguments,1),x="string"==typeof h;e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame;return a.each(function(i){var u,s,n,d,t,o,e,r,f,m=C(this),c=this;(f={initialize:function(){u=f.get.settings.apply(c,v),d=u.className,n=u.error,t=u.metadata,r="."+u.namespace,e="module-"+u.namespace,s=m.data(e)||f,o=f.get.animationEndEvent(),x&&(x=f.invoke(h)),!1===x&&(f.verbose("Converted arguments into settings object",u),u.interval?f.delay(u.animate):f.animate(),f.instantiate())},instantiate:function(){f.verbose("Storing instance of module",f),s=f,m.data(e,s)},destroy:function(){f.verbose("Destroying previous module for",c),m.removeData(e)},refresh:function(){f.verbose("Refreshing display type on next animation"),delete f.displayType},forceRepaint:function(){f.verbose("Forcing element repaint");var e=m.parent(),n=m.next();0===n.length?m.detach().appendTo(e):m.detach().insertBefore(n)},repaint:function(){f.verbose("Repainting element");c.offsetWidth},delay:function(e){var n,t=f.get.animationDirection();t||(t=f.can.transition()?f.get.direction():"static"),e=e!==w?e:u.interval,n="auto"==u.reverse&&t==d.outward||1==u.reverse?(a.length-i)*u.interval:i*u.interval,f.debug("Delaying animation by",n),setTimeout(f.animate,n)},animate:function(e){if(u=e||u,!f.is.supported())return f.error(n.support),!1;if(f.debug("Preparing animation",u.animation),f.is.animating()){if(u.queue)return!u.allowRepeats&&f.has.direction()&&f.is.occurring()&&!0!==f.queuing?f.debug("Animation is currently occurring, preventing queueing same animation",u.animation):f.queue(u.animation),!1;if(!u.allowRepeats&&f.is.occurring())return f.debug("Animation is already occurring, will not execute repeated animation",u.animation),!1;f.debug("New animation started, completing previous early",u.animation),s.complete()}f.can.animate()?f.set.animating(u.animation):f.error(n.noAnimation,u.animation,c)},reset:function(){f.debug("Resetting animation to beginning conditions"),f.remove.animationCallbacks(),f.restore.conditions(),f.remove.animating()},queue:function(e){f.debug("Queueing animation of",e),f.queuing=!0,m.one(o+".queue"+r,function(){f.queuing=!1,f.repaint(),f.animate.apply(this,u)})},complete:function(e){f.debug("Animation complete",u.animation),f.remove.completeCallback(),f.remove.failSafe(),f.is.looping()||(f.is.outward()?(f.verbose("Animation is outward, hiding element"),f.restore.conditions(),f.hide()):f.is.inward()?(f.verbose("Animation is outward, showing element"),f.restore.conditions(),f.show()):(f.verbose("Static animation completed"),f.restore.conditions(),u.onComplete.call(c)))},force:{visible:function(){var e=m.attr("style"),n=f.get.userStyle(),t=f.get.displayType(),i=n+"display: "+t+" !important;",o=m.css("display"),r=e===w||""===e;o!==t?(f.verbose("Overriding default display to show element",t),m.attr("style",i)):r&&m.removeAttr("style")},hidden:function(){var e=m.attr("style"),n=m.css("display"),t=e===w||""===e;"none"===n||f.is.hidden()?t&&m.removeAttr("style"):(f.verbose("Overriding default display to hide element"),m.css("display","none"))}},has:{direction:function(e){var t=!1;return"string"==typeof(e=e||u.animation)&&(e=e.split(" "),C.each(e,function(e,n){n!==d.inward&&n!==d.outward||(t=!0)})),t},inlineDisplay:function(){var e=m.attr("style")||"";return C.isArray(e.match(/display.*?;/,""))}},set:{animating:function(e){var n;f.remove.completeCallback(),e=e||u.animation,n=f.get.animationClass(e),f.save.animation(n),f.force.visible(),f.remove.hidden(),f.remove.direction(),f.start.animation(n)},duration:function(e,n){((n="number"==typeof(n=n||u.duration)?n+"ms":n)||0===n)&&(f.verbose("Setting animation duration",n),m.css({"animation-duration":n}))},direction:function(e){(e=e||f.get.direction())==d.inward?f.set.inward():f.set.outward()},looping:function(){f.debug("Transition set to loop"),m.addClass(d.looping)},hidden:function(){m.addClass(d.transition).addClass(d.hidden)},inward:function(){f.debug("Setting direction to inward"),m.removeClass(d.outward).addClass(d.inward)},outward:function(){f.debug("Setting direction to outward"),m.removeClass(d.inward).addClass(d.outward)},visible:function(){m.addClass(d.transition).addClass(d.visible)}},start:{animation:function(e){e=e||f.get.animationClass(),f.debug("Starting tween",e),m.addClass(e).one(o+".complete"+r,f.complete),u.useFailSafe&&f.add.failSafe(),f.set.duration(u.duration),u.onStart.call(c)}},save:{animation:function(e){f.cache||(f.cache={}),f.cache.animation=e},displayType:function(e){"none"!==e&&m.data(t.displayType,e)},transitionExists:function(e,n){C.fn.transition.exists[e]=n,f.verbose("Saving existence of transition",e,n)}},restore:{conditions:function(){var e=f.get.currentAnimation();e&&(m.removeClass(e),f.verbose("Removing animation class",f.cache)),f.remove.duration()}},add:{failSafe:function(){var e=f.get.duration();f.timer=setTimeout(function(){m.triggerHandler(o)},e+u.failSafeDelay),f.verbose("Adding fail safe timer",f.timer)}},remove:{animating:function(){m.removeClass(d.animating)},animationCallbacks:function(){f.remove.queueCallback(),f.remove.completeCallback()},queueCallback:function(){m.off(".queue"+r)},completeCallback:function(){m.off(".complete"+r)},display:function(){m.css("display","")},direction:function(){m.removeClass(d.inward).removeClass(d.outward)},duration:function(){m.css("animation-duration","")},failSafe:function(){f.verbose("Removing fail safe timer",f.timer),f.timer&&clearTimeout(f.timer)},hidden:function(){m.removeClass(d.hidden)},visible:function(){m.removeClass(d.visible)},looping:function(){f.debug("Transitions are no longer looping"),f.is.looping()&&(f.reset(),m.removeClass(d.looping))},transition:function(){m.removeClass(d.visible).removeClass(d.hidden)}},get:{settings:function(e,n,t){return"object"==typeof e?C.extend(!0,{},C.fn.transition.settings,e):"function"==typeof t?C.extend({},C.fn.transition.settings,{animation:e,onComplete:t,duration:n}):"string"==typeof n||"number"==typeof n?C.extend({},C.fn.transition.settings,{animation:e,duration:n}):"object"==typeof n?C.extend({},C.fn.transition.settings,n,{animation:e}):"function"==typeof n?C.extend({},C.fn.transition.settings,{animation:e,onComplete:n}):C.extend({},C.fn.transition.settings,{animation:e})},animationClass:function(e){var n=e||u.animation,t=f.can.transition()&&!f.has.direction()?f.get.direction()+" ":"";return d.animating+" "+d.transition+" "+t+n},currentAnimation:function(){return!(!f.cache||f.cache.animation===w)&&f.cache.animation},currentDirection:function(){return f.is.inward()?d.inward:d.outward},direction:function(){return f.is.hidden()||!f.is.visible()?d.inward:d.outward},animationDirection:function(e){var t;return"string"==typeof(e=e||u.animation)&&(e=e.split(" "),C.each(e,function(e,n){n===d.inward?t=d.inward:n===d.outward&&(t=d.outward)})),t||!1},duration:function(e){return!1===(e=e||u.duration)&&(e=m.css("animation-duration")||0),"string"==typeof e?-1<e.indexOf("ms")?parseFloat(e):1e3*parseFloat(e):e},displayType:function(e){return e=e===w||e,u.displayType?u.displayType:(e&&m.data(t.displayType)===w&&f.can.transition(!0),m.data(t.displayType))},userStyle:function(e){return(e=e||m.attr("style")||"").replace(/display.*?;/,"")},transitionExists:function(e){return C.fn.transition.exists[e]},animationStartEvent:function(){var e,n=k.createElement("div"),t={animation:"animationstart",OAnimation:"oAnimationStart",MozAnimation:"mozAnimationStart",WebkitAnimation:"webkitAnimationStart"};for(e in t)if(n.style[e]!==w)return t[e];return!1},animationEndEvent:function(){var e,n=k.createElement("div"),t={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(e in t)if(n.style[e]!==w)return t[e];return!1}},can:{transition:function(e){var n,t,i,o,r,a,s=u.animation,c=f.get.transitionExists(s),l=f.get.displayType(!1);if(c===w||e){if(f.verbose("Determining whether animation exists"),n=m.attr("class"),t=m.prop("tagName"),o=(i=C("<"+t+" />").addClass(n).insertAfter(m)).addClass(s).removeClass(d.inward).removeClass(d.outward).addClass(d.animating).addClass(d.transition).css("animationName"),r=i.addClass(d.inward).css("animationName"),l||(l=i.attr("class",n).removeAttr("style").removeClass(d.hidden).removeClass(d.visible).show().css("display"),f.verbose("Determining final display state",l),f.save.displayType(l)),i.remove(),o!=r)f.debug("Direction exists for animation",s),a=!0;else{if("none"==o||!o)return void f.debug("No animation defined in css",s);f.debug("Static animation found",s,l),a=!1}f.save.transitionExists(s,a)}return c!==w?c:a},animate:function(){return f.can.transition()!==w}},is:{animating:function(){return m.hasClass(d.animating)},inward:function(){return m.hasClass(d.inward)},outward:function(){return m.hasClass(d.outward)},looping:function(){return m.hasClass(d.looping)},occurring:function(e){return e="."+(e=e||u.animation).replace(" ","."),0<m.filter(e).length},visible:function(){return m.is(":visible")},hidden:function(){return"hidden"===m.css("visibility")},supported:function(){return!1!==o}},hide:function(){f.verbose("Hiding element"),f.is.animating()&&f.reset(),c.blur(),f.remove.display(),f.remove.visible(),f.set.hidden(),f.force.hidden(),u.onHide.call(c),u.onComplete.call(c)},show:function(e){f.verbose("Showing element",e),f.remove.hidden(),f.set.visible(),f.force.visible(),u.onShow.call(c),u.onComplete.call(c)},toggle:function(){f.is.visible()?f.hide():f.show()},stop:function(){f.debug("Stopping current animation"),m.triggerHandler(o)},stopAll:function(){f.debug("Stopping all animation"),f.remove.queueCallback(),m.triggerHandler(o)},clear:{queue:function(){f.debug("Clearing animation queue"),f.remove.queueCallback()}},enable:function(){f.verbose("Starting animation"),m.removeClass(d.disabled)},disable:function(){f.debug("Stopping animation"),m.addClass(d.disabled)},setting:function(e,n){if(f.debug("Changing setting",e,n),C.isPlainObject(e))C.extend(!0,u,e);else{if(n===w)return u[e];C.isPlainObject(u[e])?C.extend(!0,u[e],n):u[e]=n}},internal:function(e,n){if(C.isPlainObject(e))C.extend(!0,f,e);else{if(n===w)return f[e];f[e]=n}},debug:function(){!u.silent&&u.debug&&(u.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,u.name+":"),f.debug.apply(console,arguments)))},verbose:function(){!u.silent&&u.verbose&&u.debug&&(u.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,u.name+":"),f.verbose.apply(console,arguments)))},error:function(){u.silent||(f.error=Function.prototype.bind.call(console.error,console,u.name+":"),f.error.apply(console,arguments))},performance:{log:function(e){var n,t;u.performance&&(t=(n=(new Date).getTime())-(p||n),p=n,b.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:c,"Execution Time":t})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(f.performance.display,500)},display:function(){var e=u.name+":",t=0;p=!1,clearTimeout(f.performance.timer),C.each(b,function(e,n){t+=n["Execution Time"]}),e+=" "+t+"ms",g&&(e+=" '"+g+"'"),1<a.length&&(e+=" ("+a.length+")"),(console.group!==w||console.table!==w)&&0<b.length&&(console.groupCollapsed(e),console.table?console.table(b):C.each(b,function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")}),console.groupEnd()),b=[]}},invoke:function(i,e,n){var o,r,t,a=s;return e=e||y,n=c||n,"string"==typeof i&&a!==w&&(i=i.split(/[\. ]/),o=i.length-1,C.each(i,function(e,n){var t=e!=o?n+i[e+1].charAt(0).toUpperCase()+i[e+1].slice(1):i;if(C.isPlainObject(a[t])&&e!=o)a=a[t];else{if(a[t]!==w)return r=a[t],!1;if(!C.isPlainObject(a[n])||e==o)return a[n]!==w&&(r=a[n]),!1;a=a[n]}})),C.isFunction(r)?t=r.apply(n,e):r!==w&&(t=r),C.isArray(l)?l.push(t):l!==w?l=[l,t]:t!==w&&(l=t),r!==w&&r}}).initialize()}),l!==w?l:this},C.fn.transition.exists={},C.fn.transition.settings={name:"Transition",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"transition",interval:0,reverse:"auto",onStart:function(){},onComplete:function(){},onShow:function(){},onHide:function(){},useFailSafe:!0,failSafeDelay:100,allowRepeats:!1,displayType:!1,animation:"fade",duration:!1,queue:!0,metadata:{displayType:"display"},className:{animating:"animating",disabled:"disabled",hidden:"hidden",inward:"in",loading:"loading",looping:"looping",outward:"out",transition:"transition",visible:"visible"},error:{noAnimation:"Element is no longer attached to DOM. Unable to animate.  Use silent setting to surpress this warning in production.",repeated:"That animation is already occurring, cancelling repeated animation",method:"The method you called is not defined",support:"This browser does not support CSS animations"}}}(jQuery,window,document),function(T,E,e,q){"use strict";E=void 0!==E&&E.Math==Math?E:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();T.api=T.fn.api=function(x){var C,e=T.isFunction(this)?T(E):T(this),k=e.selector||"",w=(new Date).getTime(),R=[],S=x,A="string"==typeof S,P=[].slice.call(arguments,1);return e.each(function(){var r,a,t,e,s,c,l=T.isPlainObject(x)?T.extend(!0,{},T.fn.api.settings,x):T.extend({},T.fn.api.settings),n=l.namespace,i=l.metadata,o=l.selector,u=l.error,d=l.className,f="."+n,m="module-"+n,g=T(this),p=g.closest(o.form),b=l.stateContext?T(l.stateContext):g,v=this,h=b[0],y=g.data(m);c={initialize:function(){A||c.bind.events(),c.instantiate()},instantiate:function(){c.verbose("Storing instance of module",c),y=c,g.data(m,y)},destroy:function(){c.verbose("Destroying previous module for",v),g.removeData(m).off(f)},bind:{events:function(){var e=c.get.event();e?(c.verbose("Attaching API events to element",e),g.on(e+f,c.event.trigger)):"now"==l.on&&(c.debug("Querying API endpoint immediately"),c.query())}},decode:{json:function(e){if(e!==q&&"string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}},read:{cachedResponse:function(e){var n;if(E.Storage!==q)return n=sessionStorage.getItem(e),c.debug("Using cached response",e,n),n=c.decode.json(n);c.error(u.noStorage)}},write:{cachedResponse:function(e,n){n&&""===n?c.debug("Response empty, not caching",n):E.Storage!==q?(T.isPlainObject(n)&&(n=JSON.stringify(n)),sessionStorage.setItem(e,n),c.verbose("Storing cached response for url",e,n)):c.error(u.noStorage)}},query:function(){if(c.is.disabled())c.debug("Element is disabled API request aborted");else{if(c.is.loading()){if(!l.interruptRequests)return void c.debug("Cancelling request, previous request is still pending");c.debug("Interrupting previous request"),c.abort()}if(l.defaultData&&T.extend(!0,l.urlData,c.get.defaultData()),l.serializeForm&&(l.data=c.add.formData(l.data)),!1===(a=c.get.settings()))return c.cancelled=!0,void c.error(u.beforeSend);if(c.cancelled=!1,(t=c.get.templatedURL())||c.is.mocked()){if((t=c.add.urlData(t))||c.is.mocked()){if(a.url=l.base+t,r=T.extend(!0,{},l,{type:l.method||l.type,data:e,url:l.base+t,beforeSend:l.beforeXHR,success:function(){},failure:function(){},complete:function(){}}),c.debug("Querying URL",r.url),c.verbose("Using AJAX settings",r),"local"===l.cache&&c.read.cachedResponse(t))return c.debug("Response returned from local cache"),c.request=c.create.request(),void c.request.resolveWith(h,[c.read.cachedResponse(t)]);l.throttle?l.throttleFirstRequest||c.timer?(c.debug("Throttling request",l.throttle),clearTimeout(c.timer),c.timer=setTimeout(function(){c.timer&&delete c.timer,c.debug("Sending throttled request",e,r.method),c.send.request()},l.throttle)):(c.debug("Sending request",e,r.method),c.send.request(),c.timer=setTimeout(function(){},l.throttle)):(c.debug("Sending request",e,r.method),c.send.request())}}else c.error(u.missingURL)}},should:{removeError:function(){return!0===l.hideError||"auto"===l.hideError&&!c.is.form()}},is:{disabled:function(){return 0<g.filter(o.disabled).length},expectingJSON:function(){return"json"===l.dataType||"jsonp"===l.dataType},form:function(){return g.is("form")||b.is("form")},mocked:function(){return l.mockResponse||l.mockResponseAsync||l.response||l.responseAsync},input:function(){return g.is("input")},loading:function(){return!!c.request&&"pending"==c.request.state()},abortedRequest:function(e){return e&&e.readyState!==q&&0===e.readyState?(c.verbose("XHR request determined to be aborted"),!0):(c.verbose("XHR request was not aborted"),!1)},validResponse:function(e){return c.is.expectingJSON()&&T.isFunction(l.successTest)?(c.debug("Checking JSON returned success",l.successTest,e),l.successTest(e)?(c.debug("Response passed success test",e),!0):(c.debug("Response failed success test",e),!1)):(c.verbose("Response is not JSON, skipping validation",l.successTest,e),!0)}},was:{cancelled:function(){return c.cancelled||!1},succesful:function(){return c.request&&"resolved"==c.request.state()},failure:function(){return c.request&&"rejected"==c.request.state()},complete:function(){return c.request&&("resolved"==c.request.state()||"rejected"==c.request.state())}},add:{urlData:function(o,r){var e,n;return o&&(e=o.match(l.regExp.required),n=o.match(l.regExp.optional),r=r||l.urlData,e&&(c.debug("Looking for required URL variables",e),T.each(e,function(e,n){var t=-1!==n.indexOf("$")?n.substr(2,n.length-3):n.substr(1,n.length-2),i=T.isPlainObject(r)&&r[t]!==q?r[t]:g.data(t)!==q?g.data(t):b.data(t)!==q?b.data(t):r[t];if(i===q)return c.error(u.requiredParameter,t,o),o=!1;c.verbose("Found required variable",t,i),i=l.encodeParameters?c.get.urlEncodedValue(i):i,o=o.replace(n,i)})),n&&(c.debug("Looking for optional URL variables",e),T.each(n,function(e,n){var t=-1!==n.indexOf("$")?n.substr(3,n.length-4):n.substr(2,n.length-3),i=T.isPlainObject(r)&&r[t]!==q?r[t]:g.data(t)!==q?g.data(t):b.data(t)!==q?b.data(t):r[t];i!==q?(c.verbose("Optional variable Found",t,i),o=o.replace(n,i)):(c.verbose("Optional variable not found",t),o=-1!==o.indexOf("/"+n)?o.replace("/"+n,""):o.replace(n,""))}))),o},formData:function(e){var n=T.fn.serializeObject!==q,t=n?p.serializeObject():p.serialize();return e=e||l.data,T.isPlainObject(e)?n?(c.debug("Extending existing data with form data",e,t),e=T.extend(!0,{},e,t)):(c.error(u.missingSerialize),c.debug("Cant extend data. Replacing data with form data",e,t),e=t):(c.debug("Adding form data",t),e=t),e}},send:{request:function(){c.set.loading(),c.request=c.create.request(),c.is.mocked()?c.mockedXHR=c.create.mockedXHR():c.xhr=c.create.xhr(),l.onRequest.call(h,c.request,c.xhr)}},event:{trigger:function(e){c.query(),"submit"!=e.type&&"click"!=e.type||e.preventDefault()},xhr:{always:function(){},done:function(e,n,t){var i=this,o=(new Date).getTime()-s,r=l.loadingDuration-o,a=!!T.isFunction(l.onResponse)&&(c.is.expectingJSON()?l.onResponse.call(i,T.extend(!0,{},e)):l.onResponse.call(i,e));r=0<r?r:0,a&&(c.debug("Modified API response in onResponse callback",l.onResponse,a,e),e=a),0<r&&c.debug("Response completed early delaying state change by",r),setTimeout(function(){c.is.validResponse(e)?c.request.resolveWith(i,[e,t]):c.request.rejectWith(i,[t,"invalid"])},r)},fail:function(e,n,t){var i=this,o=(new Date).getTime()-s,r=l.loadingDuration-o;0<(r=0<r?r:0)&&c.debug("Response completed early delaying state change by",r),setTimeout(function(){c.is.abortedRequest(e)?c.request.rejectWith(i,[e,"aborted",t]):c.request.rejectWith(i,[e,"error",n,t])},r)}},request:{done:function(e,n){c.debug("Successful API Response",e),"local"===l.cache&&t&&(c.write.cachedResponse(t,e),c.debug("Saving server response locally",c.cache)),l.onSuccess.call(h,e,g,n)},complete:function(e,n){var t,i;c.was.succesful()?(i=e,t=n):(t=e,i=c.get.responseFromXHR(t)),c.remove.loading(),l.onComplete.call(h,i,g,t)},fail:function(e,n,t){var i=c.get.responseFromXHR(e),o=c.get.errorFromRequest(i,n,t);if("aborted"==n)return c.debug("XHR Aborted (Most likely caused by page navigation or CORS Policy)",n,t),l.onAbort.call(h,n,g,e),!0;"invalid"==n?c.debug("JSON did not pass success test. A server-side error has most likely occurred",i):"error"==n&&e!==q&&(c.debug("XHR produced a server error",n,t),200!=e.status&&t!==q&&""!==t&&c.error(u.statusMessage+t,r.url),l.onError.call(h,o,g,e)),l.errorDuration&&"aborted"!==n&&(c.debug("Adding error state"),c.set.error(),c.should.removeError()&&setTimeout(c.remove.error,l.errorDuration)),c.debug("API Request failed",o,e),l.onFailure.call(h,i,g,e)}}},create:{request:function(){return T.Deferred().always(c.event.request.complete).done(c.event.request.done).fail(c.event.request.fail)},mockedXHR:function(){var e,n,t,i=l.mockResponse||l.response,o=l.mockResponseAsync||l.responseAsync;return t=T.Deferred().always(c.event.xhr.complete).done(c.event.xhr.done).fail(c.event.xhr.fail),i?(T.isFunction(i)?(c.debug("Using specified synchronous callback",i),n=i.call(h,a)):(c.debug("Using settings specified response",i),n=i),t.resolveWith(h,[n,!1,{responseText:n}])):T.isFunction(o)&&(e=function(e){c.debug("Async callback returned response",e),e?t.resolveWith(h,[e,!1,{responseText:e}]):t.rejectWith(h,[{responseText:e},!1,!1])},c.debug("Using specified async response callback",o),o.call(h,a,e)),t},xhr:function(){var e;return e=T.ajax(r).always(c.event.xhr.always).done(c.event.xhr.done).fail(c.event.xhr.fail),c.verbose("Created server request",e,r),e}},set:{error:function(){c.verbose("Adding error state to element",b),b.addClass(d.error)},loading:function(){c.verbose("Adding loading state to element",b),b.addClass(d.loading),s=(new Date).getTime()}},remove:{error:function(){c.verbose("Removing error state from element",b),b.removeClass(d.error)},loading:function(){c.verbose("Removing loading state from element",b),b.removeClass(d.loading)}},get:{responseFromXHR:function(e){return!!T.isPlainObject(e)&&(c.is.expectingJSON()?c.decode.json(e.responseText):e.responseText)},errorFromRequest:function(e,n,t){return T.isPlainObject(e)&&e.error!==q?e.error:l.error[n]!==q?l.error[n]:t},request:function(){return c.request||!1},xhr:function(){return c.xhr||!1},settings:function(){var e;return(e=l.beforeSend.call(h,l))&&(e.success!==q&&(c.debug("Legacy success callback detected",e),c.error(u.legacyParameters,e.success),e.onSuccess=e.success),e.failure!==q&&(c.debug("Legacy failure callback detected",e),c.error(u.legacyParameters,e.failure),e.onFailure=e.failure),e.complete!==q&&(c.debug("Legacy complete callback detected",e),c.error(u.legacyParameters,e.complete),e.onComplete=e.complete)),e===q&&c.error(u.noReturnedValue),!1===e?e:e!==q?T.extend(!0,{},e):T.extend(!0,{},l)},urlEncodedValue:function(e){var n=E.decodeURIComponent(e),t=E.encodeURIComponent(e);return n!==e?(c.debug("URL value is already encoded, avoiding double encoding",e),e):(c.verbose("Encoding value using encodeURIComponent",e,t),t)},defaultData:function(){var e={};return T.isWindow(v)||(c.is.input()?e.value=g.val():c.is.form()||(e.text=g.text())),e},event:function(){return T.isWindow(v)||"now"==l.on?(c.debug("API called without element, no events attached"),!1):"auto"==l.on?g.is("input")?v.oninput!==q?"input":v.onpropertychange!==q?"propertychange":"keyup":g.is("form")?"submit":"click":l.on},templatedURL:function(e){if(e=e||g.data(i.action)||l.action||!1,t=g.data(i.url)||l.url||!1)return c.debug("Using specified url",t),t;if(e){if(c.debug("Looking up url for action",e,l.api),l.api[e]===q&&!c.is.mocked())return void c.error(u.missingAction,l.action,l.api);t=l.api[e]}else c.is.form()&&(t=g.attr("action")||b.attr("action")||!1,c.debug("No url or action specified, defaulting to form action",t));return t}},abort:function(){var e=c.get.xhr();e&&"resolved"!==e.state()&&(c.debug("Cancelling API request"),e.abort())},reset:function(){c.remove.error(),c.remove.loading()},setting:function(e,n){if(c.debug("Changing setting",e,n),T.isPlainObject(e))T.extend(!0,l,e);else{if(n===q)return l[e];T.isPlainObject(l[e])?T.extend(!0,l[e],n):l[e]=n}},internal:function(e,n){if(T.isPlainObject(e))T.extend(!0,c,e);else{if(n===q)return c[e];c[e]=n}},debug:function(){!l.silent&&l.debug&&(l.performance?c.performance.log(arguments):(c.debug=Function.prototype.bind.call(console.info,console,l.name+":"),c.debug.apply(console,arguments)))},verbose:function(){!l.silent&&l.verbose&&l.debug&&(l.performance?c.performance.log(arguments):(c.verbose=Function.prototype.bind.call(console.info,console,l.name+":"),c.verbose.apply(console,arguments)))},error:function(){l.silent||(c.error=Function.prototype.bind.call(console.error,console,l.name+":"),c.error.apply(console,arguments))},performance:{log:function(e){var n,t;l.performance&&(t=(n=(new Date).getTime())-(w||n),w=n,R.push({Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":t})),clearTimeout(c.performance.timer),c.performance.timer=setTimeout(c.performance.display,500)},display:function(){var e=l.name+":",t=0;w=!1,clearTimeout(c.performance.timer),T.each(R,function(e,n){t+=n["Execution Time"]}),e+=" "+t+"ms",k&&(e+=" '"+k+"'"),(console.group!==q||console.table!==q)&&0<R.length&&(console.groupCollapsed(e),console.table?console.table(R):T.each(R,function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")}),console.groupEnd()),R=[]}},invoke:function(i,e,n){var o,r,t,a=y;return e=e||P,n=v||n,"string"==typeof i&&a!==q&&(i=i.split(/[\. ]/),o=i.length-1,T.each(i,function(e,n){var t=e!=o?n+i[e+1].charAt(0).toUpperCase()+i[e+1].slice(1):i;if(T.isPlainObject(a[t])&&e!=o)a=a[t];else{if(a[t]!==q)return r=a[t],!1;if(!T.isPlainObject(a[n])||e==o)return a[n]!==q?r=a[n]:c.error(u.method,i),!1;a=a[n]}})),T.isFunction(r)?t=r.apply(n,e):r!==q&&(t=r),T.isArray(C)?C.push(t):C!==q?C=[C,t]:t!==q&&(C=t),r}},A?(y===q&&c.initialize(),c.invoke(S)):(y!==q&&y.invoke("destroy"),c.initialize())}),C!==q?C:this},T.api.settings={name:"API",namespace:"api",debug:!1,verbose:!1,performance:!0,api:{},cache:!0,interruptRequests:!0,on:"auto",stateContext:!1,loadingDuration:0,hideError:"auto",errorDuration:2e3,encodeParameters:!0,action:!1,url:!1,base:"",urlData:{},defaultData:!0,serializeForm:!1,throttle:0,throttleFirstRequest:!0,method:"get",data:{},dataType:"json",mockResponse:!1,mockResponseAsync:!1,response:!1,responseAsync:!1,beforeSend:function(e){return e},beforeXHR:function(e){},onRequest:function(e,n){},onResponse:!1,onSuccess:function(e,n){},onComplete:function(e,n){},onFailure:function(e,n){},onError:function(e,n){},onAbort:function(e,n){},successTest:!1,error:{beforeSend:"The before send function has aborted the request",error:"There was an error with your request",exitConditions:"API Request Aborted. Exit conditions met",JSONParse:"JSON could not be parsed during error handling",legacyParameters:"You are using legacy API success callback names",method:"The method you called is not defined",missingAction:"API action used but no url was defined",missingSerialize:"jquery-serialize-object is required to add form data to an existing data object",missingURL:"No URL specified for api event",noReturnedValue:"The beforeSend callback must return a settings object, beforeSend ignored.",noStorage:"Caching responses locally requires session storage",parseError:"There was an error parsing your request",requiredParameter:"Missing a required URL parameter: ",statusMessage:"Server gave an error: ",timeout:"Your request timed out"},regExp:{required:/\{\$*[A-z0-9]+\}/g,optional:/\{\/\$*[A-z0-9]+\}/g},className:{loading:"loading",error:"error"},selector:{disabled:".disabled",form:"form"},metadata:{action:"action",url:"url"}}}(jQuery,window,document),function(q,e,F,O){"use strict";e=void 0!==e&&e.Math==Math?e:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),q.fn.form=function(x){var C,k=q(this),w=k.selector||"",R=(new Date).getTime(),S=[],A=x,P=arguments[1],T="string"==typeof A,E=[].slice.call(arguments,1);return k.each(function(){var t,c,n,e,d,l,u,f,m,i,s,o,r,g,p,b,a=q(this),v=this,h=[],y=!1;(b={initialize:function(){b.get.settings(),T?(p===O&&b.instantiate(),b.invoke(A)):(p!==O&&p.invoke("destroy"),b.verbose("Initializing form validation",a,d),b.bindEvents(),b.set.defaults(),b.instantiate())},instantiate:function(){b.verbose("Storing instance of module",b),p=b,a.data(r,b)},destroy:function(){b.verbose("Destroying previous module",p),b.removeEvents(),a.removeData(r)},refresh:function(){b.verbose("Refreshing selector cache"),t=a.find(f.field),c=a.find(f.group),n=a.find(f.message),a.find(f.prompt),e=a.find(f.submit),a.find(f.clear),a.find(f.reset)},submit:function(){b.verbose("Submitting form",a),a.submit()},attachEvents:function(e,n){n=n||"submit",q(e).on("click"+g,function(e){b[n](),e.preventDefault()})},bindEvents:function(){b.verbose("Attaching form events"),a.on("submit"+g,b.validate.form).on("blur"+g,f.field,b.event.field.blur).on("click"+g,f.submit,b.submit).on("click"+g,f.reset,b.reset).on("click"+g,f.clear,b.clear),d.keyboardShortcuts&&a.on("keydown"+g,f.field,b.event.field.keydown),t.each(function(){var e=q(this),n=e.prop("type"),t=b.get.changeEvent(n,e);q(this).on(t+g,b.event.field.change)})},clear:function(){t.each(function(){var e=q(this),n=e.parent(),t=e.closest(c),i=t.find(f.prompt),o=e.data(u.defaultValue)||"",r=n.is(f.uiCheckbox),a=n.is(f.uiDropdown);t.hasClass(m.error)&&(b.verbose("Resetting error on field",t),t.removeClass(m.error),i.remove()),a?(b.verbose("Resetting dropdown value",n,o),n.dropdown("clear")):r?e.prop("checked",!1):(b.verbose("Resetting field value",e,o),e.val(""))})},reset:function(){t.each(function(){var e=q(this),n=e.parent(),t=e.closest(c),i=t.find(f.prompt),o=e.data(u.defaultValue),r=n.is(f.uiCheckbox),a=n.is(f.uiDropdown),s=t.hasClass(m.error);o!==O&&(s&&(b.verbose("Resetting error on field",t),t.removeClass(m.error),i.remove()),a?(b.verbose("Resetting dropdown value",n,o),n.dropdown("restore defaults")):r?(b.verbose("Resetting checkbox value",n,o),e.prop("checked",o)):(b.verbose("Resetting field value",e,o),e.val(o)))})},determine:{isValid:function(){var t=!0;return q.each(l,function(e,n){b.validate.field(n,e,!0)||(t=!1)}),t}},is:{bracketedRule:function(e){return e.type&&e.type.match(d.regExp.bracket)},shorthandFields:function(e){var n=e[Object.keys(e)[0]];return b.is.shorthandRules(n)},shorthandRules:function(e){return"string"==typeof e||q.isArray(e)},empty:function(e){return!e||0===e.length||(e.is('input[type="checkbox"]')?!e.is(":checked"):b.is.blank(e))},blank:function(e){return""===q.trim(e.val())},valid:function(e){var t=!0;return e?(b.verbose("Checking if field is valid",e),b.validate.field(l[e],e,!1)):(b.verbose("Checking if form is valid"),q.each(l,function(e,n){b.is.valid(e)||(t=!1)}),t)}},removeEvents:function(){a.off(g),t.off(g),e.off(g),t.off(g)},event:{field:{keydown:function(e){var n=q(this),t=e.which,i=n.is(f.input),o=n.is(f.checkbox),r=0<n.closest(f.uiDropdown).length,a=13;t==27&&(b.verbose("Escape key pressed blurring field"),n.blur()),e.ctrlKey||t!=a||!i||r||o||(y||(n.one("keyup"+g,b.event.field.keyup),b.submit(),b.debug("Enter pressed on input submitting form")),y=!0)},keyup:function(){y=!1},blur:function(e){var n=q(this),t=n.closest(c),i=b.get.validation(n);t.hasClass(m.error)?(b.debug("Revalidating field",n,i),i&&b.validate.field(i)):"blur"==d.on&&i&&b.validate.field(i)},change:function(e){var n=q(this),t=n.closest(c),i=b.get.validation(n);i&&("change"==d.on||t.hasClass(m.error)&&d.revalidate)&&(clearTimeout(b.timer),b.timer=setTimeout(function(){b.debug("Revalidating field",n,b.get.validation(n)),b.validate.field(i)},d.delay))}}},get:{ancillaryValue:function(e){return!(!e.type||!e.value&&!b.is.bracketedRule(e))&&(e.value!==O?e.value:e.type.match(d.regExp.bracket)[1]+"")},ruleName:function(e){return b.is.bracketedRule(e)?e.type.replace(e.type.match(d.regExp.bracket)[0],""):e.type},changeEvent:function(e,n){return"checkbox"==e||"radio"==e||"hidden"==e||n.is("select")?"change":b.get.inputEvent()},inputEvent:function(){return F.createElement("input").oninput!==O?"input":F.createElement("input").onpropertychange!==O?"propertychange":"keyup"},fieldsFromShorthand:function(e){var i={};return q.each(e,function(t,e){"string"==typeof e&&(e=[e]),i[t]={rules:[]},q.each(e,function(e,n){i[t].rules.push({type:n})})}),i},prompt:function(e,n){var t,i,o=b.get.ruleName(e),r=b.get.ancillaryValue(e),a=b.get.field(n.identifier),s=a.val(),c=q.isFunction(e.prompt)?e.prompt(s):e.prompt||d.prompt[o]||d.text.unspecifiedRule,l=-1!==c.search("{value}"),u=-1!==c.search("{name}");return l&&(c=c.replace("{value}",a.val())),u&&(i=1==(t=a.closest(f.group).find("label").eq(0)).length?t.text():a.prop("placeholder")||d.text.unspecifiedField,c=c.replace("{name}",i)),c=(c=c.replace("{identifier}",n.identifier)).replace("{ruleValue}",r),e.prompt||b.verbose("Using default validation prompt for type",c,o),c},settings:function(){if(q.isPlainObject(x)){var e=Object.keys(x);0<e.length&&(x[e[0]].identifier!==O&&x[e[0]].rules!==O)?(d=q.extend(!0,{},q.fn.form.settings,P),l=q.extend({},q.fn.form.settings.defaults,x),b.error(d.error.oldSyntax,v),b.verbose("Extending settings from legacy parameters",l,d)):(x.fields&&b.is.shorthandFields(x.fields)&&(x.fields=b.get.fieldsFromShorthand(x.fields)),d=q.extend(!0,{},q.fn.form.settings,x),l=q.extend({},q.fn.form.settings.defaults,d.fields),b.verbose("Extending settings",l,d))}else d=q.fn.form.settings,l=q.fn.form.settings.defaults,b.verbose("Using default form validation",l,d);o=d.namespace,u=d.metadata,f=d.selector,m=d.className,i=d.regExp,s=d.error,r="module-"+o,g="."+o,p=a.data(r),b.refresh()},field:function(e){return b.verbose("Finding field with identifier",e),e=b.escape.string(e),0<t.filter("#"+e).length?t.filter("#"+e):0<t.filter('[name="'+e+'"]').length?t.filter('[name="'+e+'"]'):0<t.filter('[name="'+e+'[]"]').length?t.filter('[name="'+e+'[]"]'):0<t.filter("[data-"+u.validate+'="'+e+'"]').length?t.filter("[data-"+u.validate+'="'+e+'"]'):q("<input/>")},fields:function(e){var t=q();return q.each(e,function(e,n){t=t.add(b.get.field(n))}),t},validation:function(t){var i,o;return!!l&&(q.each(l,function(e,n){o=n.identifier||e,b.get.field(o)[0]==t[0]&&(n.identifier=o,i=n)}),i||!1)},value:function(e){var n=[];return n.push(e),b.get.values.call(v,n)[e]},values:function(e){var n=q.isArray(e)?b.get.fields(e):t,l={};return n.each(function(e,n){var t=q(n),i=(t.prop("type"),t.prop("name")),o=t.val(),r=t.is(f.checkbox),a=t.is(f.radio),s=-1!==i.indexOf("[]"),c=!!r&&t.is(":checked");i&&(s?(i=i.replace("[]",""),l[i]||(l[i]=[]),r?c?l[i].push(o||!0):l[i].push(!1):l[i].push(o)):a?l[i]!==O&&0!=l[i]||(l[i]=!!c&&(o||!0)):l[i]=r?!!c&&(o||!0):o)}),l}},has:{field:function(e){return b.verbose("Checking for existence of a field with identifier",e),"string"!=typeof(e=b.escape.string(e))&&b.error(s.identifier,e),0<t.filter("#"+e).length||(0<t.filter('[name="'+e+'"]').length||0<t.filter("[data-"+u.validate+'="'+e+'"]').length)}},escape:{string:function(e){return(e=String(e)).replace(i.escape,"\\$&")}},add:{rule:function(e,n){b.add.field(e,n)},field:function(t,e){var i={};b.is.shorthandRules(e)?(e=q.isArray(e)?e:[e],i[t]={rules:[]},q.each(e,function(e,n){i[t].rules.push({type:n})})):i[t]=e,l=q.extend({},l,i),b.debug("Adding rules",i,l)},fields:function(e){var n;n=e&&b.is.shorthandFields(e)?b.get.fieldsFromShorthand(e):e,l=q.extend({},l,n)},prompt:function(e,n){var t=b.get.field(e).closest(c),i=t.children(f.prompt),o=0!==i.length;n="string"==typeof n?[n]:n,b.verbose("Adding field error state",e),t.addClass(m.error),d.inline&&(o||(i=d.templates.prompt(n)).appendTo(t),i.html(n[0]),o?b.verbose("Inline errors are disabled, no inline error added",e):d.transition&&q.fn.transition!==O&&a.transition("is supported")?(b.verbose("Displaying error with css transition",d.transition),i.transition(d.transition+" in",d.duration)):(b.verbose("Displaying error with fallback javascript animation"),i.fadeIn(d.duration)))},errors:function(e){b.debug("Adding form error messages",e),b.set.error(),n.html(d.templates.error(e))}},remove:{rule:function(t,e){var i=q.isArray(e)?e:[e];if(e==O)return b.debug("Removed all rules"),void(l[t].rules=[]);l[t]!=O&&q.isArray(l[t].rules)&&q.each(l[t].rules,function(e,n){-1!==i.indexOf(n.type)&&(b.debug("Removed rule",n.type),l[t].rules.splice(e,1))})},field:function(e){var n=q.isArray(e)?e:[e];q.each(n,function(e,n){b.remove.rule(n)})},rules:function(e,t){q.isArray(e)?q.each(fields,function(e,n){b.remove.rule(n,t)}):b.remove.rule(e,t)},fields:function(e){b.remove.field(e)},prompt:function(e){var n=b.get.field(e).closest(c),t=n.children(f.prompt);n.removeClass(m.error),d.inline&&t.is(":visible")&&(b.verbose("Removing prompt for field",e),d.transition&&q.fn.transition!==O&&a.transition("is supported")?t.transition(d.transition+" out",d.duration,function(){t.remove()}):t.fadeOut(d.duration,function(){t.remove()}))}},set:{success:function(){a.removeClass(m.error).addClass(m.success)},defaults:function(){t.each(function(){var e=q(this),n=0<e.filter(f.checkbox).length?e.is(":checked"):e.val();e.data(u.defaultValue,n)})},error:function(){a.removeClass(m.success).addClass(m.error)},value:function(e,n){var t={};return t[e]=n,b.set.values.call(v,t)},values:function(e){q.isEmptyObject(e)||q.each(e,function(e,n){var t,i=b.get.field(e),o=i.parent(),r=q.isArray(n),a=o.is(f.uiCheckbox),s=o.is(f.uiDropdown),c=i.is(f.radio)&&a;0<i.length&&(r&&a?(b.verbose("Selecting multiple",n,i),o.checkbox("uncheck"),q.each(n,function(e,n){t=i.filter('[value="'+n+'"]'),o=t.parent(),0<t.length&&o.checkbox("check")})):c?(b.verbose("Selecting radio value",n,i),i.filter('[value="'+n+'"]').parent(f.uiCheckbox).checkbox("check")):a?(b.verbose("Setting checkbox value",n,o),!0===n?o.checkbox("check"):o.checkbox("uncheck")):s?(b.verbose("Setting dropdown value",n,o),o.dropdown("set selected",n)):(b.verbose("Setting field value",n,i),i.val(n)))})}},validate:{form:function(e,n){var t=b.get.values();if(y)return!1;if(h=[],b.determine.isValid()){if(b.debug("Form has no validation errors, submitting"),b.set.success(),!0!==n)return d.onSuccess.call(v,e,t)}else if(b.debug("Form has errors"),b.set.error(),d.inline||b.add.errors(h),a.data("moduleApi")!==O&&e.stopImmediatePropagation(),!0!==n)return d.onFailure.call(v,h,t)},field:function(t,e,n){n=n===O||n,"string"==typeof t&&(b.verbose("Validating field",t),t=l[e=t]);var i=t.identifier||e,o=b.get.field(i),r=!!t.depends&&b.get.field(t.depends),a=!0,s=[];return t.identifier||(b.debug("Using field name as identifier",i),t.identifier=i),o.prop("disabled")?(b.debug("Field is disabled. Skipping",i),a=!0):t.optional&&b.is.blank(o)?(b.debug("Field is optional and blank. Skipping",i),a=!0):t.depends&&b.is.empty(r)?(b.debug("Field depends on another value that is not present or empty. Skipping",r),a=!0):t.rules!==O&&q.each(t.rules,function(e,n){b.has.field(i)&&!b.validate.rule(t,n)&&(b.debug("Field is invalid",i,n.type),s.push(b.get.prompt(n,t)),a=!1)}),a?(n&&(b.remove.prompt(i,s),d.onValid.call(o)),!0):(n&&(h=h.concat(s),b.add.prompt(i,s),d.onInvalid.call(o,s)),!1)},rule:function(e,n){var t=b.get.field(e.identifier),i=(n.type,t.val()),o=b.get.ancillaryValue(n),r=b.get.ruleName(n),a=d.rules[r];if(q.isFunction(a))return i=i===O||""===i||null===i?"":q.trim(i+""),a.call(t,i,o);b.error(s.noRule,r)}},setting:function(e,n){if(q.isPlainObject(e))q.extend(!0,d,e);else{if(n===O)return d[e];d[e]=n}},internal:function(e,n){if(q.isPlainObject(e))q.extend(!0,b,e);else{if(n===O)return b[e];b[e]=n}},debug:function(){!d.silent&&d.debug&&(d.performance?b.performance.log(arguments):(b.debug=Function.prototype.bind.call(console.info,console,d.name+":"),b.debug.apply(console,arguments)))},verbose:function(){!d.silent&&d.verbose&&d.debug&&(d.performance?b.performance.log(arguments):(b.verbose=Function.prototype.bind.call(console.info,console,d.name+":"),b.verbose.apply(console,arguments)))},error:function(){d.silent||(b.error=Function.prototype.bind.call(console.error,console,d.name+":"),b.error.apply(console,arguments))},performance:{log:function(e){var n,t;d.performance&&(t=(n=(new Date).getTime())-(R||n),R=n,S.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:v,"Execution Time":t})),clearTimeout(b.performance.timer),b.performance.timer=setTimeout(b.performance.display,500)},display:function(){var e=d.name+":",t=0;R=!1,clearTimeout(b.performance.timer),q.each(S,function(e,n){t+=n["Execution Time"]}),e+=" "+t+"ms",w&&(e+=" '"+w+"'"),1<k.length&&(e+=" ("+k.length+")"),(console.group!==O||console.table!==O)&&0<S.length&&(console.groupCollapsed(e),console.table?console.table(S):q.each(S,function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")}),console.groupEnd()),S=[]}},invoke:function(i,e,n){var o,r,t,a=p;return e=e||E,n=v||n,"string"==typeof i&&a!==O&&(i=i.split(/[\. ]/),o=i.length-1,q.each(i,function(e,n){var t=e!=o?n+i[e+1].charAt(0).toUpperCase()+i[e+1].slice(1):i;if(q.isPlainObject(a[t])&&e!=o)a=a[t];else{if(a[t]!==O)return r=a[t],!1;if(!q.isPlainObject(a[n])||e==o)return a[n]!==O&&(r=a[n]),!1;a=a[n]}})),q.isFunction(r)?t=r.apply(n,e):r!==O&&(t=r),q.isArray(C)?C.push(t):C!==O?C=[C,t]:t!==O&&(C=t),r}}).initialize()}),C!==O?C:this},q.fn.form.settings={name:"Form",namespace:"form",debug:!1,verbose:!1,performance:!0,fields:!1,keyboardShortcuts:!0,on:"submit",inline:!1,delay:200,revalidate:!0,transition:"scale",duration:200,onValid:function(){},onInvalid:function(){},onSuccess:function(){return!0},onFailure:function(){return!1},metadata:{defaultValue:"default",validate:"validate"},regExp:{htmlID:/^[a-zA-Z][\w:.-]*$/g,bracket:/\[(.*)\]/i,decimal:/^\d+\.?\d*$/,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,flags:/^\/(.*)\/(.*)?/,integer:/^\-?\d+$/,number:/^\-?\d*(\.\d+)?$/,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/i},text:{unspecifiedRule:"Please enter a valid value",unspecifiedField:"This field"},prompt:{empty:"{name} must have a value",checked:"{name} must be checked",email:"{name} must be a valid e-mail",url:"{name} must be a valid url",regExp:"{name} is not formatted correctly",integer:"{name} must be an integer",decimal:"{name} must be a decimal number",number:"{name} must be set to a number",is:'{name} must be "{ruleValue}"',isExactly:'{name} must be exactly "{ruleValue}"',not:'{name} cannot be set to "{ruleValue}"',notExactly:'{name} cannot be set to exactly "{ruleValue}"',contain:'{name} must contain "{ruleValue}"',containExactly:'{name} must contain exactly "{ruleValue}"',doesntContain:'{name} cannot contain  "{ruleValue}"',doesntContainExactly:'{name} cannot contain exactly "{ruleValue}"',minLength:"{name} must be at least {ruleValue} characters",length:"{name} must be at least {ruleValue} characters",exactLength:"{name} must be exactly {ruleValue} characters",maxLength:"{name} cannot be longer than {ruleValue} characters",match:"{name} must match {ruleValue} field",different:"{name} must have a different value than {ruleValue} field",creditCard:"{name} must be a valid credit card number",minCount:"{name} must have at least {ruleValue} choices",exactCount:"{name} must have exactly {ruleValue} choices",maxCount:"{name} must have {ruleValue} or less choices"},selector:{checkbox:'input[type="checkbox"], input[type="radio"]',clear:".clear",field:"input, textarea, select",group:".field",input:"input",message:".error.message",prompt:".prompt.label",radio:'input[type="radio"]',reset:'.reset:not([type="reset"])',submit:'.submit:not([type="submit"])',uiCheckbox:".ui.checkbox",uiDropdown:".ui.dropdown"},className:{error:"error",label:"ui prompt label",pressed:"down",success:"success"},error:{identifier:"You must specify a string identifier for each field",method:"The method you called is not defined.",noRule:"There is no rule matching the one you specified",oldSyntax:"Starting in 2.0 forms now only take a single settings object. Validation settings converted to new syntax automatically."},templates:{error:function(e){var t='<ul class="list">';return q.each(e,function(e,n){t+="<li>"+n+"</li>"}),q(t+="</ul>")},prompt:function(e){return q("<div/>").addClass("ui basic red pointing prompt label").html(e[0])}},rules:{empty:function(e){return!(e===O||""===e||q.isArray(e)&&0===e.length)},checked:function(){return 0<q(this).filter(":checked").length},email:function(e){return q.fn.form.settings.regExp.email.test(e)},url:function(e){return q.fn.form.settings.regExp.url.test(e)},regExp:function(e,n){if(n instanceof RegExp)return e.match(n);var t,i=n.match(q.fn.form.settings.regExp.flags);return i&&(n=2<=i.length?i[1]:n,t=3<=i.length?i[2]:""),e.match(new RegExp(n,t))},integer:function(e,n){var t,i,o,r=q.fn.form.settings.regExp.integer;return n&&-1===["",".."].indexOf(n)&&(-1==n.indexOf("..")?r.test(n)&&(t=i=n-0):(o=n.split("..",2),r.test(o[0])&&(t=o[0]-0),r.test(o[1])&&(i=o[1]-0))),r.test(e)&&(t===O||t<=e)&&(i===O||e<=i)},decimal:function(e){return q.fn.form.settings.regExp.decimal.test(e)},number:function(e){return q.fn.form.settings.regExp.number.test(e)},is:function(e,n){return n="string"==typeof n?n.toLowerCase():n,(e="string"==typeof e?e.toLowerCase():e)==n},isExactly:function(e,n){return e==n},not:function(e,n){return(e="string"==typeof e?e.toLowerCase():e)!=(n="string"==typeof n?n.toLowerCase():n)},notExactly:function(e,n){return e!=n},contains:function(e,n){return n=n.replace(q.fn.form.settings.regExp.escape,"\\$&"),-1!==e.search(new RegExp(n,"i"))},containsExactly:function(e,n){return n=n.replace(q.fn.form.settings.regExp.escape,"\\$&"),-1!==e.search(new RegExp(n))},doesntContain:function(e,n){return n=n.replace(q.fn.form.settings.regExp.escape,"\\$&"),-1===e.search(new RegExp(n,"i"))},doesntContainExactly:function(e,n){return n=n.replace(q.fn.form.settings.regExp.escape,"\\$&"),-1===e.search(new RegExp(n))},minLength:function(e,n){return e!==O&&e.length>=n},length:function(e,n){return e!==O&&e.length>=n},exactLength:function(e,n){return e!==O&&e.length==n},maxLength:function(e,n){return e!==O&&e.length<=n},match:function(e,n){var t;q(this);return 0<q('[data-validate="'+n+'"]').length?t=q('[data-validate="'+n+'"]').val():0<q("#"+n).length?t=q("#"+n).val():0<q('[name="'+n+'"]').length?t=q('[name="'+n+'"]').val():0<q('[name="'+n+'[]"]').length&&(t=q('[name="'+n+'[]"]')),t!==O&&e.toString()==t.toString()},different:function(e,n){var t;q(this);return 0<q('[data-validate="'+n+'"]').length?t=q('[data-validate="'+n+'"]').val():0<q("#"+n).length?t=q("#"+n).val():0<q('[name="'+n+'"]').length?t=q('[name="'+n+'"]').val():0<q('[name="'+n+'[]"]').length&&(t=q('[name="'+n+'[]"]')),t!==O&&e.toString()!==t.toString()},creditCard:function(t,e){var n,i,o={visa:{pattern:/^4/,length:[16]},amex:{pattern:/^3[47]/,length:[15]},mastercard:{pattern:/^5[1-5]/,length:[16]},discover:{pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,length:[16]},unionPay:{pattern:/^(62|88)/,length:[16,17,18,19]},jcb:{pattern:/^35(2[89]|[3-8][0-9])/,length:[16]},maestro:{pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,length:[12,13,14,15,16,17,18,19]},dinersClub:{pattern:/^(30[0-5]|^36)/,length:[14]},laser:{pattern:/^(6304|670[69]|6771)/,length:[16,17,18,19]},visaElectron:{pattern:/^(4026|417500|4508|4844|491(3|7))/,length:[16]}},r={},a=!1,s="string"==typeof e&&e.split(",");if("string"==typeof t&&0!==t.length){if(t=t.replace(/[\-]/g,""),s&&(q.each(s,function(e,n){(i=o[n])&&(r={length:-1!==q.inArray(t.length,i.length),pattern:-1!==t.search(i.pattern)}).length&&r.pattern&&(a=!0)}),!a))return!1;if((n={number:-1!==q.inArray(t.length,o.unionPay.length),pattern:-1!==t.search(o.unionPay.pattern)}).number&&n.pattern)return!0;for(var c=t.length,l=0,u=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],d=0;c--;)d+=u[l][parseInt(t.charAt(c),10)],l^=1;return d%10==0&&0<d}},minCount:function(e,n){return 0==n||(1==n?""!==e:e.split(",").length>=n)},exactCount:function(e,n){return 0==n?""===e:1==n?""!==e&&-1===e.search(","):e.split(",").length==n},maxCount:function(e,n){return 0!=n&&(1==n?-1===e.search(","):e.split(",").length<=n)}}}}(jQuery,window,document),function(T,E,q,F){"use strict";E=void 0!==E&&E.Math==Math?E:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),T.fn.visibility=function(h){var y,e=T(this),x=e.selector||"",C=(new Date).getTime(),k=[],w=h,R="string"==typeof w,S=[].slice.call(arguments,1),A=e.length,P=0;return e.each(function(){var e,n,t,s,o=T.isPlainObject(h)?T.extend(!0,{},T.fn.visibility.settings,h):T.extend({},T.fn.visibility.settings),i=o.className,r=o.namespace,c=o.error,a=o.metadata,l="."+r,u="module-"+r,d=T(E),f=T(this),m=T(o.context),g=(f.selector,f.data(u)),p=E.requestAnimationFrame||E.mozRequestAnimationFrame||E.webkitRequestAnimationFrame||E.msRequestAnimationFrame||function(e){setTimeout(e,0)},b=this,v=!1;s={initialize:function(){s.debug("Initializing",o),s.setup.cache(),s.should.trackChanges()&&("image"==o.type&&s.setup.image(),"fixed"==o.type&&s.setup.fixed(),o.observeChanges&&s.observeChanges(),s.bind.events()),s.save.position(),s.is.visible()||s.error(c.visible,f),o.initialCheck&&s.checkVisibility(),s.instantiate()},instantiate:function(){s.debug("Storing instance",s),f.data(u,s),g=s},destroy:function(){s.verbose("Destroying previous module"),t&&t.disconnect(),n&&n.disconnect(),d.off("load"+l,s.event.load).off("resize"+l,s.event.resize),m.off("scroll"+l,s.event.scroll).off("scrollchange"+l,s.event.scrollchange),"fixed"==o.type&&(s.resetFixed(),s.remove.placeholder()),f.off(l).removeData(u)},observeChanges:function(){"MutationObserver"in E&&(n=new MutationObserver(s.event.contextChanged),t=new MutationObserver(s.event.changed),n.observe(q,{childList:!0,subtree:!0}),t.observe(b,{childList:!0,subtree:!0}),s.debug("Setting up mutation observer",t))},bind:{events:function(){s.verbose("Binding visibility events to scroll and resize"),o.refreshOnLoad&&d.on("load"+l,s.event.load),d.on("resize"+l,s.event.resize),m.off("scroll"+l).on("scroll"+l,s.event.scroll).on("scrollchange"+l,s.event.scrollchange)}},event:{changed:function(e){s.verbose("DOM tree modified, updating visibility calculations"),s.timer=setTimeout(function(){s.verbose("DOM tree modified, updating sticky menu"),s.refresh()},100)},contextChanged:function(e){[].forEach.call(e,function(e){e.removedNodes&&[].forEach.call(e.removedNodes,function(e){(e==b||0<T(e).find(b).length)&&(s.debug("Element removed from DOM, tearing down events"),s.destroy())})})},resize:function(){s.debug("Window resized"),o.refreshOnResize&&p(s.refresh)},load:function(){s.debug("Page finished loading"),p(s.refresh)},scroll:function(){o.throttle?(clearTimeout(s.timer),s.timer=setTimeout(function(){m.triggerHandler("scrollchange"+l,[m.scrollTop()])},o.throttle)):p(function(){m.triggerHandler("scrollchange"+l,[m.scrollTop()])})},scrollchange:function(e,n){s.checkVisibility(n)}},precache:function(e,n){e instanceof Array||(e=[e]);for(var t=e.length,i=0,o=[],r=q.createElement("img"),a=function(){++i>=e.length&&T.isFunction(n)&&n()};t--;)(r=q.createElement("img")).onload=a,r.onerror=a,r.src=e[t],o.push(r)},enableCallbacks:function(){s.debug("Allowing callbacks to occur"),v=!1},disableCallbacks:function(){s.debug("Disabling all callbacks temporarily"),v=!0},should:{trackChanges:function(){return R?(s.debug("One time query, no need to bind events"),!1):(s.debug("Callbacks being attached"),!0)}},setup:{cache:function(){s.cache={occurred:{},screen:{},element:{}}},image:function(){var e=f.data(a.src);e&&(s.verbose("Lazy loading image",e),o.once=!0,o.observeChanges=!1,o.onOnScreen=function(){s.debug("Image on screen",b),s.precache(e,function(){s.set.image(e,function(){++P==A&&o.onAllLoaded.call(this),o.onLoad.call(this)})})})},fixed:function(){s.debug("Setting up fixed"),o.once=!1,o.observeChanges=!1,o.initialCheck=!0,o.refreshOnLoad=!0,h.transition||(o.transition=!1),s.create.placeholder(),s.debug("Added placeholder",e),o.onTopPassed=function(){s.debug("Element passed, adding fixed position",f),s.show.placeholder(),s.set.fixed(),o.transition&&T.fn.transition!==F&&f.transition(o.transition,o.duration)},o.onTopPassedReverse=function(){s.debug("Element returned to position, removing fixed",f),s.hide.placeholder(),s.remove.fixed()}}},create:{placeholder:function(){s.verbose("Creating fixed position placeholder"),e=f.clone(!1).css("display","none").addClass(i.placeholder).insertAfter(f)}},show:{placeholder:function(){s.verbose("Showing placeholder"),e.css("display","block").css("visibility","hidden")}},hide:{placeholder:function(){s.verbose("Hiding placeholder"),e.css("display","none").css("visibility","")}},set:{fixed:function(){s.verbose("Setting element to fixed position"),f.addClass(i.fixed).css({position:"fixed",top:o.offset+"px",left:"auto",zIndex:o.zIndex}),o.onFixed.call(b)},image:function(e,n){if(f.attr("src",e),o.transition)if(T.fn.transition!==F){if(f.hasClass(i.visible))return void s.debug("Transition already occurred on this image, skipping animation");f.transition(o.transition,o.duration,n)}else f.fadeIn(o.duration,n);else f.show()}},is:{onScreen:function(){return s.get.elementCalculations().onScreen},offScreen:function(){return s.get.elementCalculations().offScreen},visible:function(){return!(!s.cache||!s.cache.element)&&!(0===s.cache.element.width&&0===s.cache.element.offset.top)},verticallyScrollableContext:function(){var e=m.get(0)!==E&&m.css("overflow-y");return"auto"==e||"scroll"==e},horizontallyScrollableContext:function(){var e=m.get(0)!==E&&m.css("overflow-x");return"auto"==e||"scroll"==e}},refresh:function(){s.debug("Refreshing constants (width/height)"),"fixed"==o.type&&s.resetFixed(),s.reset(),s.save.position(),o.checkOnRefresh&&s.checkVisibility(),o.onRefresh.call(b)},resetFixed:function(){s.remove.fixed(),s.remove.occurred()},reset:function(){s.verbose("Resetting all cached values"),T.isPlainObject(s.cache)&&(s.cache.screen={},s.cache.element={})},checkVisibility:function(e){s.verbose("Checking visibility of element",s.cache.element),!v&&s.is.visible()&&(s.save.scroll(e),s.save.calculations(),s.passed(),s.passingReverse(),s.topVisibleReverse(),s.bottomVisibleReverse(),s.topPassedReverse(),s.bottomPassedReverse(),s.onScreen(),s.offScreen(),s.passing(),s.topVisible(),s.bottomVisible(),s.topPassed(),s.bottomPassed(),o.onUpdate&&o.onUpdate.call(b,s.get.elementCalculations()))},passed:function(e,n){var t=s.get.elementCalculations();if(e&&n)o.onPassed[e]=n;else{if(e!==F)return s.get.pixelsPassed(e)>t.pixelsPassed;t.passing&&T.each(o.onPassed,function(e,n){t.bottomVisible||t.pixelsPassed>s.get.pixelsPassed(e)?s.execute(n,e):o.once||s.remove.occurred(n)})}},onScreen:function(e){var n=s.get.elementCalculations(),t=e||o.onOnScreen,i="onScreen";if(e&&(s.debug("Adding callback for onScreen",e),o.onOnScreen=e),n.onScreen?s.execute(t,i):o.once||s.remove.occurred(i),e!==F)return n.onOnScreen},offScreen:function(e){var n=s.get.elementCalculations(),t=e||o.onOffScreen,i="offScreen";if(e&&(s.debug("Adding callback for offScreen",e),o.onOffScreen=e),n.offScreen?s.execute(t,i):o.once||s.remove.occurred(i),e!==F)return n.onOffScreen},passing:function(e){var n=s.get.elementCalculations(),t=e||o.onPassing,i="passing";if(e&&(s.debug("Adding callback for passing",e),o.onPassing=e),n.passing?s.execute(t,i):o.once||s.remove.occurred(i),e!==F)return n.passing},topVisible:function(e){var n=s.get.elementCalculations(),t=e||o.onTopVisible,i="topVisible";if(e&&(s.debug("Adding callback for top visible",e),o.onTopVisible=e),n.topVisible?s.execute(t,i):o.once||s.remove.occurred(i),e===F)return n.topVisible},bottomVisible:function(e){var n=s.get.elementCalculations(),t=e||o.onBottomVisible,i="bottomVisible";if(e&&(s.debug("Adding callback for bottom visible",e),o.onBottomVisible=e),n.bottomVisible?s.execute(t,i):o.once||s.remove.occurred(i),e===F)return n.bottomVisible},topPassed:function(e){var n=s.get.elementCalculations(),t=e||o.onTopPassed,i="topPassed";if(e&&(s.debug("Adding callback for top passed",e),o.onTopPassed=e),n.topPassed?s.execute(t,i):o.once||s.remove.occurred(i),e===F)return n.topPassed},bottomPassed:function(e){var n=s.get.elementCalculations(),t=e||o.onBottomPassed,i="bottomPassed";if(e&&(s.debug("Adding callback for bottom passed",e),o.onBottomPassed=e),n.bottomPassed?s.execute(t,i):o.once||s.remove.occurred(i),e===F)return n.bottomPassed},passingReverse:function(e){var n=s.get.elementCalculations(),t=e||o.onPassingReverse,i="passingReverse";if(e&&(s.debug("Adding callback for passing reverse",e),o.onPassingReverse=e),n.passing?o.once||s.remove.occurred(i):s.get.occurred("passing")&&s.execute(t,i),e!==F)return!n.passing},topVisibleReverse:function(e){var n=s.get.elementCalculations(),t=e||o.onTopVisibleReverse,i="topVisibleReverse";if(e&&(s.debug("Adding callback for top visible reverse",e),o.onTopVisibleReverse=e),n.topVisible?o.once||s.remove.occurred(i):s.get.occurred("topVisible")&&s.execute(t,i),e===F)return!n.topVisible},bottomVisibleReverse:function(e){var n=s.get.elementCalculations(),t=e||o.onBottomVisibleReverse,i="bottomVisibleReverse";if(e&&(s.debug("Adding callback for bottom visible reverse",e),o.onBottomVisibleReverse=e),n.bottomVisible?o.once||s.remove.occurred(i):s.get.occurred("bottomVisible")&&s.execute(t,i),e===F)return!n.bottomVisible},topPassedReverse:function(e){var n=s.get.elementCalculations(),t=e||o.onTopPassedReverse,i="topPassedReverse";if(e&&(s.debug("Adding callback for top passed reverse",e),o.onTopPassedReverse=e),n.topPassed?o.once||s.remove.occurred(i):s.get.occurred("topPassed")&&s.execute(t,i),e===F)return!n.onTopPassed},bottomPassedReverse:function(e){var n=s.get.elementCalculations(),t=e||o.onBottomPassedReverse,i="bottomPassedReverse";if(e&&(s.debug("Adding callback for bottom passed reverse",e),o.onBottomPassedReverse=e),n.bottomPassed?o.once||s.remove.occurred(i):s.get.occurred("bottomPassed")&&s.execute(t,i),e===F)return!n.bottomPassed},execute:function(e,n){var t=s.get.elementCalculations(),i=s.get.screenCalculations();(e=e||!1)&&(o.continuous?(s.debug("Callback being called continuously",n,t),e.call(b,t,i)):s.get.occurred(n)||(s.debug("Conditions met",n,t),e.call(b,t,i))),s.save.occurred(n)},remove:{fixed:function(){s.debug("Removing fixed position"),f.removeClass(i.fixed).css({position:"",top:"",left:"",zIndex:""}),o.onUnfixed.call(b)},placeholder:function(){s.debug("Removing placeholder content"),e&&e.remove()},occurred:function(e){if(e){var n=s.cache.occurred;n[e]!==F&&!0===n[e]&&(s.debug("Callback can now be called again",e),s.cache.occurred[e]=!1)}else s.cache.occurred={}}},save:{calculations:function(){s.verbose("Saving all calculations necessary to determine positioning"),s.save.direction(),s.save.screenCalculations(),s.save.elementCalculations()},occurred:function(e){e&&(s.cache.occurred[e]!==F&&!0===s.cache.occurred[e]||(s.verbose("Saving callback occurred",e),s.cache.occurred[e]=!0))},scroll:function(e){e=e+o.offset||m.scrollTop()+o.offset,s.cache.scroll=e},direction:function(){var e,n=s.get.scroll(),t=s.get.lastScroll();return e=t<n&&t?"down":n<t&&t?"up":"static",s.cache.direction=e,s.cache.direction},elementPosition:function(){var e=s.cache.element,n=s.get.screenSize();return s.verbose("Saving element position"),e.fits=e.height<n.height,e.offset=f.offset(),e.width=f.outerWidth(),e.height=f.outerHeight(),s.is.verticallyScrollableContext()&&(e.offset.top+=m.scrollTop()-m.offset().top),s.is.horizontallyScrollableContext()&&(e.offset.left+=m.scrollLeft-m.offset().left),s.cache.element=e},elementCalculations:function(){var e=s.get.screenCalculations(),n=s.get.elementPosition();return o.includeMargin?(n.margin={},n.margin.top=parseInt(f.css("margin-top"),10),n.margin.bottom=parseInt(f.css("margin-bottom"),10),n.top=n.offset.top-n.margin.top,n.bottom=n.offset.top+n.height+n.margin.bottom):(n.top=n.offset.top,n.bottom=n.offset.top+n.height),n.topPassed=e.top>=n.top,n.bottomPassed=e.top>=n.bottom,n.topVisible=e.bottom>=n.top&&!n.topPassed,n.bottomVisible=e.bottom>=n.bottom&&!n.bottomPassed,n.pixelsPassed=0,n.percentagePassed=0,n.onScreen=(n.topVisible||n.passing)&&!n.bottomPassed,n.passing=n.topPassed&&!n.bottomPassed,n.offScreen=!n.onScreen,n.passing&&(n.pixelsPassed=e.top-n.top,n.percentagePassed=(e.top-n.top)/n.height),s.cache.element=n,s.verbose("Updated element calculations",n),n},screenCalculations:function(){var e=s.get.scroll();return s.save.direction(),s.cache.screen.top=e,s.cache.screen.bottom=e+s.cache.screen.height,s.cache.screen},screenSize:function(){s.verbose("Saving window position"),s.cache.screen={height:m.height()}},position:function(){s.save.screenSize(),s.save.elementPosition()}},get:{pixelsPassed:function(e){var n=s.get.elementCalculations();return-1<e.search("%")?n.height*(parseInt(e,10)/100):parseInt(e,10)},occurred:function(e){return s.cache.occurred!==F&&s.cache.occurred[e]||!1},direction:function(){return s.cache.direction===F&&s.save.direction(),s.cache.direction},elementPosition:function(){return s.cache.element===F&&s.save.elementPosition(),s.cache.element},elementCalculations:function(){return s.cache.element===F&&s.save.elementCalculations(),s.cache.element},screenCalculations:function(){return s.cache.screen===F&&s.save.screenCalculations(),s.cache.screen},screenSize:function(){return s.cache.screen===F&&s.save.screenSize(),s.cache.screen},scroll:function(){return s.cache.scroll===F&&s.save.scroll(),s.cache.scroll},lastScroll:function(){return s.cache.screen===F?(s.debug("First scroll event, no last scroll could be found"),!1):s.cache.screen.top}},setting:function(e,n){if(T.isPlainObject(e))T.extend(!0,o,e);else{if(n===F)return o[e];o[e]=n}},internal:function(e,n){if(T.isPlainObject(e))T.extend(!0,s,e);else{if(n===F)return s[e];s[e]=n}},debug:function(){!o.silent&&o.debug&&(o.performance?s.performance.log(arguments):(s.debug=Function.prototype.bind.call(console.info,console,o.name+":"),s.debug.apply(console,arguments)))},verbose:function(){!o.silent&&o.verbose&&o.debug&&(o.performance?s.performance.log(arguments):(s.verbose=Function.prototype.bind.call(console.info,console,o.name+":"),s.verbose.apply(console,arguments)))},error:function(){o.silent||(s.error=Function.prototype.bind.call(console.error,console,o.name+":"),s.error.apply(console,arguments))},performance:{log:function(e){var n,t;o.performance&&(t=(n=(new Date).getTime())-(C||n),C=n,k.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:b,"Execution Time":t})),clearTimeout(s.performance.timer),s.performance.timer=setTimeout(s.performance.display,500)},display:function(){var e=o.name+":",t=0;C=!1,clearTimeout(s.performance.timer),T.each(k,function(e,n){t+=n["Execution Time"]}),e+=" "+t+"ms",x&&(e+=" '"+x+"'"),(console.group!==F||console.table!==F)&&0<k.length&&(console.groupCollapsed(e),console.table?console.table(k):T.each(k,function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")}),console.groupEnd()),k=[]}},invoke:function(i,e,n){var o,r,t,a=g;return e=e||S,n=b||n,"string"==typeof i&&a!==F&&(i=i.split(/[\. ]/),o=i.length-1,T.each(i,function(e,n){var t=e!=o?n+i[e+1].charAt(0).toUpperCase()+i[e+1].slice(1):i;if(T.isPlainObject(a[t])&&e!=o)a=a[t];else{if(a[t]!==F)return r=a[t],!1;if(!T.isPlainObject(a[n])||e==o)return a[n]!==F?r=a[n]:s.error(c.method,i),!1;a=a[n]}})),T.isFunction(r)?t=r.apply(n,e):r!==F&&(t=r),T.isArray(y)?y.push(t):y!==F?y=[y,t]:t!==F&&(y=t),r}},R?(g===F&&s.initialize(),g.save.scroll(),g.save.calculations(),s.invoke(w)):(g!==F&&g.invoke("destroy"),s.initialize())}),y!==F?y:this},T.fn.visibility.settings={name:"Visibility",namespace:"visibility",debug:!1,verbose:!1,performance:!0,observeChanges:!0,initialCheck:!0,refreshOnLoad:!0,refreshOnResize:!0,checkOnRefresh:!0,once:!0,continuous:!1,offset:0,includeMargin:!1,context:E,throttle:!1,type:!1,zIndex:"10",transition:"fade in",duration:1e3,onPassed:{},onOnScreen:!1,onOffScreen:!1,onPassing:!1,onTopVisible:!1,onBottomVisible:!1,onTopPassed:!1,onBottomPassed:!1,onPassingReverse:!1,onTopVisibleReverse:!1,onBottomVisibleReverse:!1,onTopPassedReverse:!1,onBottomPassedReverse:!1,onLoad:function(){},onAllLoaded:function(){},onFixed:function(){},onUnfixed:function(){},onUpdate:!1,onRefresh:function(){},metadata:{src:"src"},className:{fixed:"fixed",placeholder:"placeholder",visible:"visible"},error:{method:"The method you called is not defined.",visible:"Element is hidden, you must call refresh after element becomes visible"}}}(jQuery,window,document);